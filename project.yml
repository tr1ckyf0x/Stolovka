name: "Stolovka"

settings:
  base:
    DEBUG_INFORMATION_FORMAT: dwarf-with-dsym
    CLANG_ANALYZER_LOCALIZABILITY_NONLOCALIZED: YES
    CLANG_ANALYZER_LOCALIZABILITY_EMPTY_CONTEXT: YES
    CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER: YES

options:
  deploymentTarget:
    iOS: 15.0
  preGenCommand: ./Scripts/autogenerated_files.sh

attributes:
  ORGANIZATIONNAME: "Владислав Лисянский"

packages:
  SnapKit:
    url: https://github.com/SnapKit/SnapKit
    from: 5.0.1
  Moya:
    url: https://github.com/Moya/Moya
    from: 15.0.0
  Swinject:
    url: https://github.com/Swinject/Swinject
    from: 2.8.0
  Nimble:
    url: https://github.com/Quick/Nimble
    from: 9.2.0
  Quick:
    url: https://github.com/Quick/Quick
    from: 4.0.0

  # Local packages

  UseCase:
    path: Stolovka/Packages/UseCase
  SharedResources:
    path: Stolovka/Packages/SharedResources
  MainScreen:
    path: Stolovka/Packages/MainScreen
  UsernameProvider:
    path: Stolovka/Packages/UsernameProvider
  QuoteOfTheDayProvider:
    path: Stolovka/Packages/QuoteOfTheDayProvider
  OldsRecommendedProductsProvider:
    path: Stolovka/Packages/OldsRecommendedProductsProvider
  SmokersStolovka:
    path: Stolovka/Packages/SmokersStolovka
  CartScreen:
    path: Stolovka/Packages/CartScreen
  Models:
    path: Stolovka/Packages/Models

targets:
  Stolovka:
    platform: iOS
    type: application
    sources:
      - path: "Stolovka"
        excludes:
          - "Packages/**/"
    dependencies:
      - package: SnapKit
      - package: Moya
      - package: Swinject
      - package: UseCase
      - package: SharedResources
      - package: MainScreen
      - package: UsernameProvider
      - package: QuoteOfTheDayProvider
      - package: OldsRecommendedProductsProvider
      - package: SmokersStolovka
      - package: CartScreen
      - package: Models

    settings:
      base:
        TARGETED_DEVICE_FAMILY: 1
        DISPLAY_NAME: "Stolovka"
        INFOPLIST_FILE: "Stolovka/Info.plist"
        OTHER_LDFLAGS: $(inherited) -ObjC
        DEVELOPMENT_TEAM: SGM5527A99
        PRODUCT_BUNDLE_IDENTIFIER: com.tr1ckyf0x.stolovka
        CODE_SIGN_STYLE: Manual
      configs:
        Debug:
          CODE_SIGN_IDENTITY: "Apple Development"
          PROVISIONING_PROFILE_SPECIFIER: "Stolovka Development"
        Release:
          CODE_SIGN_IDENTITY: "Apple Distribution"
          PROVISIONING_PROFILE_SPECIFIER: "Stolovka AppStore"

  StolovkaTests:
    type: bundle.unit-test
    platform: iOS
    sources:
      - path: "StolovkaTests"
    dependencies:
      - target: "Stolovka"
      - package: Quick
      - package: Nimble
      - package: UseCase
